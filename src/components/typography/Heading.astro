---
import { cva } from 'class-variance-authority';

const heading = cva('text-foreground', {
  variants: {
    variant: {
      // Display: Hero h1 - inherits base h1 styles from global.css
      display: [
        'print:text-[16px]',
        'print:leading-tight',
      ],
      // Default: Section headings
      default: [
        'text-fluid-xl',
        'font-medium',
        'tracking-tight',
        'leading-snug',
        'print:text-[14px]',
        'print:leading-snug',
      ],
      // Small: Subsection headings
      small: [
        'text-fluid-lg',
        'font-medium',
        'tracking-tight',
        'leading-snug',
        'print:text-[13px]',
        'print:leading-snug',
      ],
      // Tiny: Card titles (Job/Project heroes - darkest, heaviest)
      tiny: [
        'text-fluid-base',
        'font-medium',
        'tracking-tight',
        // Print: 14px, black weight, pitch black, tight tracking, SANS-SERIF
        'print:font-sans',
        'print:text-[14px]',
        'print:font-black',
        'print:tracking-[-0.02em]',
        'print:leading-[1.1]',
        'print:text-[var(--color-print-foreground)]',
        'print:break-after-avoid',
        'print:mb-0.5'
      ],
      // Name: Sidebar name display (responsive sizing)
      name: [
        'text-xl',
        'light:text-fluid-xl',
        'lg:text-3xl',
        'light:lg:text-fluid-xl',
        'font-medium',
        'tracking-tight',
        'leading-none',
        'print:text-[22px]',
        'print:font-black',
        'print:tracking-[-0.03em]',
      ],
      // Section: Main content section titles (EXPERIENCE, PROJECTS, etc.)
      section: [
        'text-fluid-sm',
        'font-semibold',
        'uppercase',
        'tracking-[0.1em]',
        // Light mode: smaller size, wider tracking, explicit !important to prevent accent color bleed
        'light:!text-foreground',
        'light:text-fluid-md',
        'light:tracking-[0.2em]',
        'light:font-sans',
        'light:order-[-1]',
        'light:mb-0',
        'light:pb-0',
        'light:!block',
        // Print: matches sidebar IMPACT title exactly
        'print:text-left',
        'print:uppercase',
        'print:font-sans',
        'print:font-bold',
        'print:text-[10px]',
        'print:tracking-[0.06em]',
        'print:text-[var(--color-print-body)]',
        'print:border-solid',
        'print:border-b',
        'print:!border-[#e5e5e5]',
        'print:w-full',
        'print:!pb-3',
        'print:mb-3',
        'print:leading-tight',
      ],
    },
  },
  defaultVariants: {
    variant: 'default',
  },
});

type Variant = 'display' | 'default' | 'small' | 'tiny' | 'name' | 'section';

interface Props {
  as?: 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';
  class?: string;
  // Boolean variant props - use <Heading small> instead of <Heading variant="small">
  display?: boolean;
  small?: boolean;
  tiny?: boolean;
  name?: boolean;
  section?: boolean;
}

const {
  as: Tag = 'h2',
  class: className,
  display,
  small,
  tiny,
  name,
  section,
  ...attrs
} = Astro.props as Props;

// Determine variant from boolean props (first truthy wins, default to default)
const variant: Variant = display ? 'display' : name ? 'name' : section ? 'section' : small ? 'small' : tiny ? 'tiny' : 'default';

const classes = heading({ variant, class: className });
---

<Tag class={classes} {...attrs}>
  <slot />
</Tag>
