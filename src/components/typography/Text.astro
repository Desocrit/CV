---
import { cva } from 'class-variance-authority';

const text = cva('', {
  variants: {
    variant: {
      // Body: Default paragraph text
      body: [
        'text-fluid-base',
        'text-foreground',
        'leading-relaxed',
        'print:text-[12px]',
        'print:leading-[1.4]',
        'print:text-[var(--color-print-body)]',
      ],
      // Lead: Headline/intro text (matches ContentCard headline)
      lead: [
        'text-fluid-sm',
        'text-muted-foreground',
        'leading-relaxed',
        'font-medium',
        'print:text-[12px]',
        'print:leading-[1.4]',
        'print:font-normal',
        'print:text-[var(--color-print-foreground)]',
      ],
      // Summary: Hero summary style
      summary: [
        'text-fluid-sm',
        'text-foreground',
        'leading-relaxed',
        'opacity-80',
        'print:text-[12px]',
        'print:leading-[1.4]',
        'print:opacity-100',
      ],
      // Subtitle: Role/subtitle text (sidebar header role)
      subtitle: [
        'text-fluid-sm',
        'font-light',
        'tracking-wide',
        'text-[var(--color-muted-foreground-light)]',
        'light:text-foreground',
        'light:font-medium',
        'print:text-[12px]',
        'print:leading-[1.4]',
        'print:text-[var(--color-print-body)]',
      ],
      // Small: Bullet points, secondary content
      small: [
        'text-fluid-sm',
        'text-muted-foreground',
        'print:text-[11px]',
        'print:leading-[1.4]',
        'print:text-[var(--color-print-body)]',
      ],
      // Muted: De-emphasized text, descriptions, secondary info
      muted: [
        'text-fluid-sm',
        'text-muted-foreground',
        'leading-relaxed',
        'print:text-[10px]',
        'print:leading-tight',
        'print:text-[var(--color-print-body)]',
      ],
      // Mono: Monospace text for technical content (tech lists)
      mono: [
        'font-mono',
        'text-fluid-sm',
        'text-muted-foreground',
        'print:text-[11px]',
        'print:leading-snug',
        'print:text-[var(--color-print-body)]',
      ],
    },
  },
  defaultVariants: {
    variant: 'body',
  },
});

type Variant = 'body' | 'lead' | 'summary' | 'subtitle' | 'small' | 'muted' | 'mono';

interface Props {
  as?: 'p' | 'span' | 'div';
  class?: string;
  // Boolean variant props - use <Text muted> instead of <Text variant="muted">
  lead?: boolean;
  summary?: boolean;
  subtitle?: boolean;
  small?: boolean;
  muted?: boolean;
  mono?: boolean;
}

const {
  as: Tag = 'p',
  class: className,
  lead,
  summary,
  subtitle,
  small,
  muted,
  mono,
  ...attrs
} = Astro.props as Props;

// Determine variant from boolean props (first truthy wins, default to body)
const variant: Variant = lead ? 'lead' : summary ? 'summary' : subtitle ? 'subtitle' : small ? 'small' : muted ? 'muted' : mono ? 'mono' : 'body';

const classes = text({ variant, class: className });
---

<Tag class={classes} {...attrs}>
  <slot />
</Tag>
