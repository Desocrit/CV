---
/**
 * PrintHeader - Full-width print-only header
 *
 * Spans page width with name/title left, contact right, strong rule below.
 * Includes profile summary below the title.
 * Hidden on screen, visible only in print.
 */
import Stack from '../layout/Stack.astro';
import Heading from '../typography/Heading.astro';
import Text from '../typography/Text.astro';

interface Props {
  name: string;
  role: string;
  location: string;
  phone?: string;
  email: string;
  linkedin: string;
  github: string;
  source: string;
  profile: string;
}

const { name, role, location, phone, email, linkedin, github, source, profile } = Astro.props;

// Extract usernames from URLs
const linkedinHandle = linkedin.replace(/https?:\/\/(www\.)?linkedin\.com\/in\//, '').slice(0, -1);
const githubHandle = github.replace(/https?:\/\/(www\.)?github\.com\//, '');
const sourceRepo = source.replace(/https?:\/\/(www\.)?github\.com\//, '');
---

<Stack as="header" gap="sm" class="hidden print:!flex print:pt-3 print:pb-3 print:border-b-2 print:border-[var(--color-print-foreground)] print:mb-3">
  <div class="print:flex print:justify-between print:items-start">
    <Stack gap="xs">
      <Heading as="h1" name>{name}</Heading>
      <Text subtitle>{role}</Text>
      <Text muted as="div" class="print:max-w-[85ch] mt-1">
        {profile.split('\n').filter(line => line.trim()).map(line => (
          <span class="block">{line}</span>
        ))}
      </Text>
    </Stack>

    <Stack as="address" gap="sm" class="not-italic text-right mt-2">
      <Text muted as="div">{location}{phone ? ` Â· ${phone}` : ''}</Text>
      <Text muted as="div">{email}</Text>
      <Text muted as="div">/in/{linkedinHandle}</Text>
      <Text muted as="div">github.com/{githubHandle}</Text>
      <Text muted as="div">src: {sourceRepo}</Text>
    </Stack>
  </div>
</Stack>
