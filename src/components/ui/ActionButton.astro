---
interface Props {
  label: string;
  href?: string;
  external?: boolean;
  class?: string;
  screenReaderLabel?: string;
  'data-print'?: string;
}

const { label, href, external = false, class: className = '', screenReaderLabel, ...attrs } = Astro.props;
const isLink = !!href;
const hasCustomLabel = !!screenReaderLabel;
---

{isLink ? (
  <a
    href={href}
    class:list={['action-button', className]}
    target={external ? '_blank' : undefined}
    rel={external ? 'noopener noreferrer' : undefined}
    {...attrs}
  >
    {hasCustomLabel && <span class="sr-only">{screenReaderLabel}</span>}
    <span class="bracket" aria-hidden={hasCustomLabel}>[</span>
    <span class="label" aria-hidden={hasCustomLabel}> {label} </span>
    <span class="bracket" aria-hidden={hasCustomLabel}>]</span>
  </a>
) : (
  <button type="button" class:list={['action-button', className]} {...attrs}>
    {hasCustomLabel && <span class="sr-only">{screenReaderLabel}</span>}
    <span class="bracket" aria-hidden={hasCustomLabel}>[</span>
    <span class="label" aria-hidden={hasCustomLabel}> {label} </span>
    <span class="bracket" aria-hidden={hasCustomLabel}>]</span>
  </button>
)}

<style>
  .action-button {
    display: inline-flex;
    align-items: center;
    gap: 0;
    font-family: var(--font-mono);
    font-size: var(--text-fluid-2xs);
    color: var(--color-accent-purple);
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    transition: filter 0.15s ease;
  }

  .action-button:hover {
    filter: brightness(1.2);
  }

  .action-button:focus-visible {
    outline: none;
    ring: 2px solid var(--color-ring);
  }

  .bracket,
  .label {
    color: var(--color-accent-purple);
  }
</style>
