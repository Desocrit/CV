---
interface Props {
  label: string;
  href?: string;
  external?: boolean;
  class?: string;
  screenReaderLabel?: string;
}

const { label, href, external = false, class: className = '', screenReaderLabel, ...attrs } = Astro.props;
const isLink = !!href;
const hasCustomLabel = !!screenReaderLabel;

const baseClasses = [
  // Layout
  'inline-flex items-center',
  // Typography
  'font-mono text-fluid-sm',
  // Colors
  'text-[var(--color-accent-purple)]',
  'light:text-muted-foreground',
  // Button reset
  'border-none p-0 cursor-pointer',
  // Transitions
  'transition-[filter] duration-150 ease-out',
  // Hover state
  'hover:brightness-[1.2]',
  // Focus state
  'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-ring)]',
];

const bracketClasses = 'bracket text-[var(--color-accent-purple)] light:hidden';
const labelClasses = 'label text-[var(--color-accent-purple)] light:text-muted-foreground light:font-semibold';
---

{isLink ? (
  <a
    href={href}
    class:list={['action-button', baseClasses, className]}
    target={external ? '_blank' : undefined}
    rel={external ? 'noopener noreferrer' : undefined}
    {...attrs}
  >
    {hasCustomLabel && <span class="sr-only">{screenReaderLabel}</span>}
    <span class={bracketClasses} aria-hidden={hasCustomLabel}>[</span>
    <span class={labelClasses} aria-hidden={hasCustomLabel}> {label} </span>
    <span class={bracketClasses} aria-hidden={hasCustomLabel}>]</span>
  </a>
) : (
  <button type="button" class:list={['action-button', baseClasses, className]} {...attrs}>
    {hasCustomLabel && <span class="sr-only">{screenReaderLabel}</span>}
    <span class={bracketClasses} aria-hidden={hasCustomLabel}>[</span>
    <span class={labelClasses} aria-hidden={hasCustomLabel}> {label} </span>
    <span class={bracketClasses} aria-hidden={hasCustomLabel}>]</span>
  </button>
)}
