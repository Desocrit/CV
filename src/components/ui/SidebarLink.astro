---
interface Props {
  href?: string;
  external?: boolean;
  onClick?: string;
  class?: string;
  'data-print'?: string;
}

const { href, external = false, onClick, class: className = '', ...attrs } = Astro.props;

const isButton = !href;
const baseClass = 'sidebar-link inline-flex items-center gap-2 text-muted-foreground hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring';
---

{isButton ? (
  <button
    type="button"
    class:list={[baseClass, 'cursor-pointer', className]}
    onclick={onClick}
    {...attrs}
  >
    <slot />
  </button>
) : (
  <a
    href={href}
    class:list={[baseClass, className]}
    target={external ? '_blank' : undefined}
    rel={external ? 'noopener noreferrer' : undefined}
    {...attrs}
  >
    <slot />
  </a>
)}

<style>
  .sidebar-link {
    transition: color 0.2s ease;
  }

  /* Underline animation on text span */
  .sidebar-link :global(.link-text) {
    position: relative;
  }

  .sidebar-link :global(.link-text)::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 1px;
    background-color: var(--color-foreground);
    transition: width 0.2s ease;
  }

  .sidebar-link:hover :global(.link-text)::after {
    width: 100%;
  }
</style>
