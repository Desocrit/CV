@import 'tailwindcss';
@plugin '@tailwindcss/typography';

/* Custom variant for light mode (dark is default, light is opt-in via data-theme) */
@custom-variant light (&:where([data-theme="light"], [data-theme="light"] *));

@font-face {
  font-family: 'Geist';
  src: url('/fonts/Geist-Variable.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Geist Mono';
  src: url('/fonts/GeistMono-Variable.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

/* IBM Plex Sans for light mode */
@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/IBMPlexSans-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/IBMPlexSans-Medium.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/IBMPlexSans-SemiBold.woff2') format('woff2');
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/IBMPlexSans-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* IBM Plex Mono for light mode */
@font-face {
  font-family: 'IBM Plex Mono';
  src: url('/fonts/IBMPlexMono-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'IBM Plex Mono';
  src: url('/fonts/IBMPlexMono-Medium.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'IBM Plex Mono';
  src: url('/fonts/IBMPlexMono-SemiBold.woff2') format('woff2');
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

@theme {
  --breakpoint-sm: 560px;
  --breakpoint-md: 730px;
  --breakpoint-lg: 960px;
  --breakpoint-xl: 1300px;

  --font-sans: 'Geist', 'system-ui', 'sans-serif';
  --font-mono: 'Geist Mono', 'Consolas', monospace;

  --text-fluid-2xs: 0.5625rem;
  --text-fluid-xs: clamp(0.625rem, 0.6rem + 0.1vw, 0.6875rem);
  --text-fluid-sm: clamp(0.6875rem, 0.67rem + 0.1vw, 0.7275rem);
  --text-fluid-base: clamp(0.9375rem, 0.8625rem + 0.375vw, 1.0625rem);
  --text-fluid-lg: clamp(1.0625rem, 0.9375rem + 0.625vw, 1.3125rem);
  --text-fluid-xl: clamp(1.3125rem, 1.1375rem + 0.875vw, 1.6875rem);
  --text-fluid-2xl: clamp(1.6875rem, 1.4375rem + 1.25vw, 2.1875rem);
  --text-fluid-3xl: clamp(2.1875rem, 1.8375rem + 1.75vw, 2.9375rem);
  --text-fluid-4xl: clamp(2.6875rem, 2.2375rem + 2.25vw, 3.9375rem);
  --text-fluid-5xl: clamp(3.4375rem, 2.7375rem + 3.5vw, 4.9375rem);

  --spacing-fluid-xs: clamp(0.25rem, 0.2rem + 0.25vw, 0.5rem);
  --spacing-fluid-sm: clamp(0.75rem, 0.6rem + 0.75vw, 1.25rem);
  --spacing-fluid-md: clamp(1.5rem, 1.2rem + 1.5vw, 2.5rem);
  --spacing-fluid-lg: clamp(2.5rem, 2rem + 2.5vw, 4rem);
  --spacing-fluid-xl: clamp(4rem, 3.2rem + 4vw, 6rem);
  --spacing-fluid-2xl: clamp(6rem, 4.8rem + 6vw, 10rem);

  --color-background: #050505;
  --color-foreground: #f2f2f2;

  --color-card: #050505;
  --color-card-foreground: #f2f2f2;

  --color-popover: #050505;
  --color-popover-foreground: #f2f2f2;

  --color-primary: #f2f2f2;
  --color-primary-foreground: #050505;

  --color-secondary: #0a0a0a;
  --color-secondary-foreground: #f2f2f2;

  --color-muted: #111111;
  --color-muted-foreground: #8a8a8a;
  --color-muted-foreground-light: #a0a0a0;

  --color-accent: #111111;
  --color-accent-foreground: #f2f2f2;

  --color-destructive: #7f1d1d;
  --color-destructive-foreground: #f2f2f2;

  --color-border: rgba(255, 255, 255, 0.06);
  --color-border-subtle: rgba(255, 255, 255, 0.03);
  --color-input: rgba(255, 255, 255, 0.1);
  --color-ring: #f2f2f2;

  --color-achievement: #f2f2f2;
  --color-achievement-foreground: #050505;

  --color-terminal-bg: #050505;
  --color-terminal-text: #767676;
  --color-terminal-prompt: #767676;
  --color-terminal-accent: #f2f2f2;

  --color-status-live: #f2f2f2;
  --color-status-completed: #767676;
  --color-status-active: #767676;

  --color-accent-purple: #9d7cd8;
  --color-accent-green: #37BF51;

  /* Tokyo Night terminal palette */
  --color-accent-blue: #1ab8d6;
  --color-accent-orange: #f59456;
  --color-accent-red: #f7768e;
  --color-accent-cyan: #73daca;

  /* Geometry tokens */
  --hairline-border: 1px;
  --shadow-offset: 2px;

  /* Glow effects base color (for dark mode text glows) */
  --glow-text-base: rgba(242, 242, 242, 0.6);
}

[data-theme='light'] {
  /* Swiss Blueprint: Architectural Specification palette */
  --color-background: #F5F5F7; /* Technical Vellum */
  --color-foreground: #1D1D1F; /* Charcoal Ink */

  --color-card: #F5F5F7;
  --color-card-foreground: #1D1D1F;

  --color-popover: #F5F5F7;
  --color-popover-foreground: #1D1D1F;

  --color-primary: #1D1D1F;
  --color-primary-foreground: #F5F5F7;

  --color-secondary: #EBEBED;
  --color-secondary-foreground: #1D1D1F;

  --color-muted: #E8E8EA;
  --color-muted-foreground: #636366;
  --color-muted-foreground-light: #86868B;

  --color-accent: #EBEBED;
  --color-accent-foreground: #1D1D1F;

  --color-border: rgba(0, 0, 0, 0.12);
  --color-border-subtle: rgba(0, 0, 0, 0.06);
  --color-input: rgba(0, 0, 0, 0.08);
  --color-ring: #1D1D1F;

  --color-achievement: #1D1D1F;
  --color-achievement-foreground: #F5F5F7;

  --color-terminal-bg: rgba(255, 255, 255, 0.8); /* Console: white 80% opacity */
  --color-terminal-text: #1D1D1F; /* Charcoal Mono */
  --color-terminal-prompt: #636366;
  --color-terminal-accent: #1D1D1F;

  /* Engineering Inks (Swiss architectural palette) */
  --color-accent-purple: #9A5B4C; /* Terracotta */
  --color-accent-green: #2D6A4F; /* Forest Green */
  --color-accent-blue: #2A5A8A; /* Ink Blue */
  --color-accent-orange: #B5651D; /* Raw Sienna */
  --color-accent-red: #8B3A3A; /* Oxblood */
  --color-accent-cyan: #3D6B6B; /* Verdigris */

  /* Light mode geometry */
  --hairline-border: 0.5px;
  --shadow-offset: 2px;
  --shadow-offset-color: #D1D1D6; /* Hard offset shadow color */

  /* Glow effects base color (for light mode text glows) */
  --glow-text-base: rgba(29, 29, 31, 0.5);
}

/* ==========================================================================
   PRINT: Custom Properties for Print Styles
   Optimized for professional black & white printing
   ========================================================================== */
@media print {
  :root {
    /* Print-specific color definitions */
    --color-print-foreground: #1a1a1a;
    --color-print-muted: #666666;
    --color-print-body: #4a4a4a;
    --color-print-border: #d0d0d0;
    --color-print-background: #ffffff;

    /* Override semantic tokens for print */
    --color-background: var(--color-print-background);
    --color-foreground: var(--color-print-foreground);
    --color-muted-foreground: var(--color-print-muted);
    --color-muted-foreground-light: var(--color-print-body);
    --color-border: var(--color-print-border);

    /* Override font variables to use IBM Plex for print */
    --font-sans: 'IBM Plex Sans', system-ui, sans-serif;
    --font-mono: 'IBM Plex Mono', 'Consolas', monospace;
  }
}

/* ==========================================================================
   LIGHT MODE: Swiss Blueprint Typography
   IBM Plex fonts with architectural kerning
   ========================================================================== */

/* The Swiss Kerning Secret - optimizeLegibility for crisp rendering */
[data-theme='light'] {
  font-family: 'IBM Plex Sans', system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Tighten headers to feel like a "Block" of ink */
[data-theme='light'] h1,
[data-theme='light'] h2,
[data-theme='light'] h3 {
  font-weight: 600;
  letter-spacing: -0.022em; /* The "Inter" Sweet Spot */
  line-height: 1.1;
}

[data-theme='light'] h4 {
  font-weight: 500;
  letter-spacing: -0.015em;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

@layer base {
  html {
    font-family: var(--font-sans);
    font-size: var(--text-fluid-base);
    line-height: 1.6;
    color-scheme: dark light;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    background-color: var(--color-background);
    color: var(--color-foreground);
    font-feature-settings: 'ss01' on, 'ss02' on, 'cv01' on, 'cv03' on, 'zero' on;
  }

  .scrollbar-hidden {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  .scrollbar-hidden::-webkit-scrollbar {
    display: none;
  }

  h1 {
    font-size: var(--text-fluid-4xl);
    font-weight: 500;
    line-height: 1.05;
    letter-spacing: -0.04em;
  }

  h2 {
    font-size: var(--text-fluid-xl);
    font-weight: 500;
    line-height: 1.15;
    letter-spacing: -0.03em;
  }

  h3 {
    font-size: var(--text-fluid-lg);
    font-weight: 500;
    line-height: 1.25;
    letter-spacing: -0.02em;
  }

  h4 {
    font-size: var(--text-fluid-base);
    font-weight: 500;
    line-height: 1.35;
    letter-spacing: -0.01em;
  }

  p {
    line-height: 1.7;
  }

  :focus-visible {
    outline: 2px solid var(--color-ring);
    outline-offset: 2px;
  }

  /* Enhanced focus styles for terminal modal (WCAG 2.1 AAA) */
  .rag-terminal :focus-visible {
    outline: 2px solid var(--color-accent-green);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(55, 191, 81, 0.15);
  }

  .rag-terminal button:focus-visible {
    outline: 2px solid var(--color-accent-green);
    outline-offset: 2px;
  }

  .rag-terminal input:focus-visible {
    outline: none;
    box-shadow: inset 0 -2px 0 var(--color-accent-green);
  }

  ::selection {
    background-color: var(--color-foreground);
    color: var(--color-background);
  }

  .skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--color-primary);
    color: var(--color-primary-foreground);
    padding: 8px 16px;
    z-index: 100;
    transition: top 0.2s;
    font-family: var(--font-mono);
    font-size: var(--text-fluid-sm);
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .skip-link:focus {
    top: 0;
  }
}


/* Print/screen visibility utilities - full print styles in print.css */
@media not print {
  .print-only {
    display: none;
  }
}

@media print {
  .screen-only {
    display: none;
  }
}
